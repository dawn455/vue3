<script>
  
  // let quantity = 2
  // 定义一个商品对象
  let product = {
    price: 10,
    quantity: 2
  }


  // p:代理对象才能触发setter和getter
  // product:被代理对象
const p = new Proxy(product,{
  set(target,key,newVal,receiver) {
  // console.log(target,key,newVal,receiver);
  // console.log('setter');
  target[key] = newVal
  effect()
  return true
  },
  get(target,key,receiver) {
    // console.log(target,key,receiver);
    // console.log('getter');

    return target[key]
  }
})

  // total
  let total = 0
  // 计算total
  let effect = () => {
    total = p.price * p.quantity
  }

  effect()
  console.log(`总价格:${total}`);
</script>